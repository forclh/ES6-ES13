<!--
 * @version: 1.0
 * @Author: Hedy_Li
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        {
            //用于将嵌套的数组“拉平”，变成一维数组。
            //1.扁平化嵌套数组 flat(深度)
            console.log([1, 2, 3, [4, 5, [6]]].flat(2));  // [1,2,3,4,5,6] 
            console.log([1, 2, 3, [4, 5, [6]]].flat(1));  //[1, 2, 3, 4, 5, [6]]
            //2.扁平化任意深度 Infinity
            console.log([1, [2, [3, [4, [5]]]]].flat(Infinity)); //[1, 2, 3, 4, 5] 
            //3.扁平化空项
            console.log([1, 2, 3, , 4].flat());  //[1, 2, 3, 4]
        }
        {
            //flatMap() 方法首先使用映射函数映射每个元素，然后将结果压缩成一个新数组。
            //它与 map 连着深度值为1的 flat 几乎相同，但 flatMap 通常在合并成一种方法的效率稍微高一些。

            // 此方法和flat一样会降维数组 不过此方法只会降维一次 
            // 并可以对数组中的元素进行迭代通过return返回 (不会改变原数组 需要使用一个变量容器承接)

            // 作用：首先使用映射函数映射每个元素，然后将结果压缩成一个新数组
            // 返回值：一个新的数组，其中每个元素都是回调函数的结果，并且结构深度 depth值为1
            // 是否改变原有数组：否

            // var new_array = arr.flatMap(
            // function callback(currentValue[, index[, array]]) {
            //     // return element for new_array
            // }[, thisArg])  
        }
        {
            let arr = [1, [2, 3], 4, [5, [6, 7]]];

            let arr2 = arr.flatMap(item => item); // 将数组降维为[1,2,3,4,5,[6,7]]
            console.log(arr2)  //[1, 2, 3, 4, 5,[6,7]] 
        }
        {
            // flatMap 方法与 map 方法和深度depth为1的 flat 几乎相同
            var arr1 = [1, 2, 3];
            var arg1 = arr1.map(x => [x * 2]);
            console.log(arg1) // [[2], [4], [6]] 

            let arr2 = [1, 2, 3];
            let arg2 = arr2.flatMap(x => [[x * 2]]);
            console.log(arg2) //[[2], [4], [6]] 
        }
        {
            const arr = [1, 2, 3, 4, 5, 6]
            const newArr = arr.flatMap(x => x % 2 === 0 ? [x] : [])
            console.log(newArr); //  [2, 4, 6]
        }


    </script>
</body>

</html>